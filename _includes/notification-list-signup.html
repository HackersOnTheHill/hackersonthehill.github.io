<!-- Newsletter Modal -->
<!-- Original MailerLite Form ID: mlb2-35715770 -->
<!-- Form endpoint: https://assets.mailerlite.com/jsonp/1236748/forms/176523805626205508/subscribe -->
<div class="modal fade modal--headerless" id="newsletterModal" tabindex="-1" aria-label="Newsletter signup" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      <div class="modal-body">
        <div class="row g-3 align-items-center">
          <!-- Form column (left side on desktop) -->
          <div class="col-12 col-md-auto px-3">
            <h4>Get Notified</h4>
            <p>Be among the first to know about news and upcoming events!</p>

            <form id="newsletterForm" class="mt-3" onsubmit="handleNewsletterSubmit(event)">
              <!-- First name and Last name on same row (desktop), stacked on mobile -->
              <div class="row g-2 mb-2">
                <div class="col-12 col-md-6">
                  <input aria-label="first_name" aria-required="true" type="text"
                         class="form-control form-control-sm" name="fields[first_name]"
                         placeholder="First name" autocomplete="given-name" required>
                </div>
                <div class="col-12 col-md-6">
                  <input aria-label="last_name" type="text"
                         class="form-control form-control-sm" name="fields[last_name]"
                         placeholder="Last name" autocomplete="family-name">
                </div>
              </div>

              <!-- Email field -->
              <div class="mb-3">
                <input type="email" class="form-control form-control-sm"
                       name="fields[email]" placeholder="Email" autocomplete="email"
                       required aria-required="true" aria-label="email">
              </div>

              <!-- Hidden fields -->
              <input type="hidden" name="ml-submit" value="1">
              <input type="hidden" name="anticsrf" value="true">

              <!-- Submit button - centered -->
              <div class="text-center">
                <button type="submit" class="button">Get Notified</button>
              </div>
            </form>
          </div>

          <!-- Privacy disclaimer (right side on desktop) -->
          <div class="col-12 col-md text-start px-3">
            <p>We use your info to send occasional updates about Hackers on the Hill events, registration windows, and related announcements (through <a href="https://mailerlite.com" target="_blank" rel="noopener">MailerLite</a>). No spam, no ads, no selling, no unrelated junk, and you can unsubscribe anytime.</p>
          </div>
        </div>

        <!-- Success message (hidden by default) -->
        <div id="successMessage" style="display: none;" class="text-center">
          <i class="fa-regular fa-circle-check fa-3x mb-3" style="color: var(--accent-primary);" aria-hidden="true"></i>
          <h4>Welcome!</h4>
          <p>You'll now be among the first to know about news and upcoming events!</p>
        </div>

        <!-- Error message (hidden by default) -->
        <div id="errorMessage" style="display: none;" class="text-center">
          <i class="fa-regular fa-circle-xmark fa-3x mb-3" style="color: #dc3545;" aria-hidden="true"></i>
          <h4>Oops!</h4>
          <p>We're sorry, but there was an error processing your subscription. Please try signing up directly at:</p>
          <a href="https://preview.mailerlite.io/preview/1236748/sites/176527125350713095/YYYvf8?fresh=1" target="_blank" rel="noopener" class="button">Sign Up Here</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- MailerLite Scripts and Form Handler -->
<script>
  function handleNewsletterSubmit(event) {
    event.preventDefault();

    const form = event.target;
    const formData = new FormData(form);
    const action = 'https://assets.mailerlite.com/jsonp/1236748/forms/176523805626205508/subscribe';

    // Submit form via fetch to avoid popup
    fetch(action, {
      method: 'POST',
      body: formData,
      mode: 'no-cors' // MailerLite endpoint requires this
    })
    .then(() => {
      // Hide form row, show success message
      document.querySelector('#newsletterModal .row').style.display = 'none';
      document.getElementById('successMessage').style.display = 'block';
    })
    .catch(error => {
      console.error('Error submitting form:', error);
      // Hide form row, show error message
      document.querySelector('#newsletterModal .row').style.display = 'none';
      document.getElementById('errorMessage').style.display = 'block';
    });
  }

  // Reset modal when it's closed
  document.getElementById('newsletterModal').addEventListener('hidden.bs.modal', function() {
    document.querySelector('#newsletterModal .row').style.display = 'flex';
    document.getElementById('successMessage').style.display = 'none';
    document.getElementById('errorMessage').style.display = 'none';
    document.getElementById('newsletterForm').reset();
  });
</script>

<script src="https://groot.mailerlite.com/js/w/webforms.min.js?v176e10baa5e7ed80d35ae235be3d5024" type="text/javascript"></script>
<script>
  fetch("https://assets.mailerlite.com/jsonp/1236748/forms/176523805626205508/takel")
</script>
